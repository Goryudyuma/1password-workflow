<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>com.alfredapp.1password</string>
	<key>connections</key>
	<dict>
		<key>09BA5A7C-9F72-441C-95B2-46F669C53682</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>10031FBB-CD36-4DDE-AA61-1642381CD7AF</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>910FCF14-BDBB-4FF7-A7B2-41014E499149</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>1F48BB68-C11E-4C91-A9DA-E19098554E9A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>7277B529-365D-4D92-B874-22C6E407F47E</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>2166D3DB-EF96-4C03-B95A-77D5068615D7</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>AE76F4A7-146D-417D-9F3D-F6A410C9C970</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>3C6D1460-731F-4A4A-8836-8AD03743EE23</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>AADC9859-4CF2-43B3-831D-940B6BCBC278</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>4AFED243-84FB-4005-B115-FFD8635E6737</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>604864F3-BFC6-44E3-9B01-F23F5B25D77F</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>2AC71A21-7210-4154-AE38-29A81884BE9F</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>745206F1-E7CE-43E5-93E0-80BAC4DC608C</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>C84F022F-832E-431C-8EBE-74DB981EEFB8</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>4FEB803E-78D2-4DAA-A493-0C499D3B3415</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>09BA5A7C-9F72-441C-95B2-46F669C53682</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>556ED3AD-7754-4CD8-8293-1D142475B475</key>
		<array/>
		<key>5B779377-8A0B-4819-9840-611C663A1004</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>E0E63366-C846-4EB6-8625-9CCDD1637737</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>556ED3AD-7754-4CD8-8293-1D142475B475</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>604864F3-BFC6-44E3-9B01-F23F5B25D77F</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>36A773EE-B145-4579-B70F-6D286604C92B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>10031FBB-CD36-4DDE-AA61-1642381CD7AF</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>1F48BB68-C11E-4C91-A9DA-E19098554E9A</string>
				<key>modifiers</key>
				<integer>1048576</integer>
				<key>modifiersubtext</key>
				<string>View in 1Password</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>666D7BDE-787B-44BD-A535-3F76541B7F8C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>5B779377-8A0B-4819-9840-611C663A1004</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<true/>
			</dict>
		</array>
		<key>7277B529-365D-4D92-B874-22C6E407F47E</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>AE76F4A7-146D-417D-9F3D-F6A410C9C970</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>745206F1-E7CE-43E5-93E0-80BAC4DC608C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>666D7BDE-787B-44BD-A535-3F76541B7F8C</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>900A2A3E-D5CB-475C-996A-C6A8207DB171</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>4FEB803E-78D2-4DAA-A493-0C499D3B3415</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>910FCF14-BDBB-4FF7-A7B2-41014E499149</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>3C6D1460-731F-4A4A-8836-8AD03743EE23</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>EEAE4AD1-7B81-409C-821C-00A1CA6056C4</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>7277B529-365D-4D92-B874-22C6E407F47E</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>985CB791-EA4E-4B3E-A04E-37A481C33035</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>4AFED243-84FB-4005-B115-FFD8635E6737</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>9FB513DD-70CB-4714-90C0-60C64D8A8784</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>AADC9859-4CF2-43B3-831D-940B6BCBC278</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>2166D3DB-EF96-4C03-B95A-77D5068615D7</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>E0E63366-C846-4EB6-8625-9CCDD1637737</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Vítor Galvão</string>
	<key>description</key>
	<string>Search and open 1Password items</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>1Password</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>triggerid</key>
				<string>data_update_detected</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.external</string>
			<key>uid</key>
			<string>900A2A3E-D5CB-475C-996A-C6A8207DB171</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string># Checks
if [[ -z "${alfred_workflow_bundleid}" ]]; then
  echo 'Workflow is missing bundle identifier!' &gt;&amp;2
  exit 1
fi

# Plist contents
read -r -d '' plist_contents &lt;&lt;ENDPLIST
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;${alfred_workflow_bundleid}&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/usr/bin/osascript&lt;/string&gt;
        &lt;string&gt;-e&lt;/string&gt;
        &lt;string&gt;tell application id &amp;quot;com.runningwithcrayons.Alfred&amp;quot; to run trigger &amp;quot;data_update_detected&amp;quot; in workflow &amp;quot;${alfred_workflow_bundleid}&amp;quot;&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;WatchPaths&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;~/Library/Group Containers/2BUA8C4S2C.com.1password/Library/Application Support/1Password/Data&lt;/string&gt;
    &lt;/array&gt;
&lt;/dict&gt;
&lt;/plist&gt;
ENDPLIST

# Main
readonly launchagents_dir="${HOME}/Library/LaunchAgents"
readonly plist_file="${launchagents_dir}/${alfred_workflow_bundleid}.plist"

if [[ "${auto_refresh}" -eq 0 ]]; then
  # Exit early if plist does not exist
  [[ -f "${plist_file}" ]] || exit 0

  # Uninstall agent
  launchctl bootout "gui/$(id -u "${USER}")" "${plist_file}"
  rm "${plist_file}"
else
  # Exit early if plist exists
  [[ -f "${plist_file}" ]] &amp;&amp; exit 0

  # Install agent
  mkdir -p "${launchagents_dir}"
  echo "${plist_contents}" &gt; "${plist_file}"
  launchctl bootstrap "gui/$(id -u "${USER}")" "${plist_file}"
fi</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>readonly items_hash_file="${alfred_workflow_data}/items_hash.txt"
readonly old_items_hash="$(/bin/cat "${items_hash_file}")"
readonly new_items_hash="$(/usr/bin/sqlite3 "${HOME}/Library/Group Containers/2BUA8C4S2C.com.1password/Library/Application Support/1Password/Data/1password.sqlite" 'SELECT * FROM item_overviews;' | md5)"

[[ "${old_items_hash}" == "${new_items_hash}" ]] &amp;&amp; exit 0

./1password.js 'data_update_detected'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>4FEB803E-78D2-4DAA-A493-0C499D3B3415</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>./op signout --all
./op account forget --all
rm -rf "${alfred_workflow_data}"
rm -rf "${alfred_workflow_cache}"
rm "${HOME}/Library/LaunchAgents/${alfred_workflow_bundleid}.plist"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>36A773EE-B145-4579-B70F-6D286604C92B</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.junction</string>
			<key>uid</key>
			<string>604864F3-BFC6-44E3-9B01-F23F5B25D77F</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string># Add notice to update items
./1password.js 'data_update_detected'

# Escaped for terminal
printf '  clear &amp;&amp; cat %q/instructions_banner.txt &amp;&amp; eval "$(%q/op account add --signin --shorthand %q)" &amp;&amp; echo "\nYou may close the terminal."' "${PWD}" "${PWD}" "${1}"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argumenttype</key>
				<integer>0</integer>
				<key>subtext</key>
				<string>A short and unique identifier for this account</string>
				<key>text</key>
				<string>Account shorthand</string>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.keyword</string>
			<key>uid</key>
			<string>09BA5A7C-9F72-441C-95B2-46F669C53682</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.hidealfred</string>
			<key>uid</key>
			<string>E0E63366-C846-4EB6-8625-9CCDD1637737</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>fixedorder</key>
				<false/>
				<key>items</key>
				<string>[{"title":"Manage vaults","arg":"manage_vaults","subtitle":"Include or exclude vaults from results"},{"title":"Force update items","arg":"update_items","subtitle":"Your terminal will open with instructions"},{"title":"Add account","arg":"add_account","subtitle":"Use multiple accounts at once"},{"title":"Reset accounts","arg":"reset_accounts","subtitle":"Delete Workflow data"}]</string>
				<key>keyword</key>
				<string>:1pextras</string>
				<key>runningsubtext</key>
				<string></string>
				<key>subtext</key>
				<string>Uncommon but useful actions</string>
				<key>title</key>
				<string>1Password Extras</string>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.listfilter</string>
			<key>uid</key>
			<string>985CB791-EA4E-4B3E-A04E-37A481C33035</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<true/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Getting vaults…</string>
				<key>script</key>
				<string>readonly file="${alfred_workflow_data}/vaults.json"

if [[ -f "${file}" ]]; then
  export uid_seed="$(date '+%s')"
  cat "${file}"
  exit 0
fi

echo '{ "items": [{
  "title": "Sign in and update items",
  "subtitle": "Your terminal will open with instructions",
  "arg": "update_items"
}] }'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Include or exclude vaults from results</string>
				<key>title</key>
				<string>Manage vaults</string>
				<key>type</key>
				<integer>5</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>666D7BDE-787B-44BD-A535-3F76541B7F8C</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>./1password.js 'flip_vault_exclusion' "${1}"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>556ED3AD-7754-4CD8-8293-1D142475B475</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>reset_accounts</string>
						<key>outputlabel</key>
						<string>Reset accounts</string>
						<key>uid</key>
						<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
					</dict>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>add_account</string>
						<key>outputlabel</key>
						<string>Add account</string>
						<key>uid</key>
						<string>2AC71A21-7210-4154-AE38-29A81884BE9F</string>
					</dict>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>manage_vaults</string>
						<key>outputlabel</key>
						<string>Manage vaults</string>
						<key>uid</key>
						<string>C84F022F-832E-431C-8EBE-74DB981EEFB8</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>Update items</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>4AFED243-84FB-4005-B115-FFD8635E6737</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>update_items</string>
						<key>outputlabel</key>
						<string>Update items</string>
						<key>uid</key>
						<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>Flip vault inclusion</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>5B779377-8A0B-4819-9840-611C663A1004</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<false/>
				<key>variables</key>
				<dict/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>745206F1-E7CE-43E5-93E0-80BAC4DC608C</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string># Escaped for terminal, but also removes the newline
# to avoid sending empty input to the first "op" question
printf '  export alfred_workflow_data=%q &amp;&amp; export logins_only=%q &amp;&amp; %q/signin.zsh' "${alfred_workflow_data}" "${logins_only}" "${PWD}"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>5</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>9FB513DD-70CB-4714-90C0-60C64D8A8784</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<true/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>keyword</key>
				<string>1p</string>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Getting items…</string>
				<key>script</key>
				<string>readonly file="${alfred_workflow_data}/items.json"

if [[ -f "${file}" ]]; then
  cat "${file}"
  exit 0
fi

echo '{ "items": [{
  "title": "Sign in and update items",
  "subtitle": "Your terminal will open with instructions",
  "arg": "update_items"
}] }'</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string>Show your 1Password items</string>
				<key>title</key>
				<string>1Password</string>
				<key>type</key>
				<integer>5</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>escaping</key>
				<integer>0</integer>
				<key>script</key>
				<string>{query}</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.terminalcommand</string>
			<key>uid</key>
			<string>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>update_items</string>
						<key>outputlabel</key>
						<string>Update items</string>
						<key>uid</key>
						<string>60128803-7491-4D16-8ADE-FB406F888A2D</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>else</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>10031FBB-CD36-4DDE-AA61-1642381CD7AF</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>function run() {
  const itemID = $.NSProcessInfo.processInfo.environment.objectForKey("itemID").js
  const query = itemID + "=" + itemID

  const url = $.NSProcessInfo.processInfo.environment.objectForKey("url").js
  const urlObject = $.NSURL.URLWithString(url)

  if (urlObject.query.js === undefined) return url + "?" + query
  return url + "&amp;" + query
}</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>7</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>3C6D1460-731F-4A4A-8836-8AD03743EE23</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>browser</key>
				<string></string>
				<key>spaces</key>
				<string></string>
				<key>url</key>
				<string></string>
				<key>utf8</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.openurl</string>
			<key>uid</key>
			<string>2166D3DB-EF96-4C03-B95A-77D5068615D7</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string>{var:url}</string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>1</integer>
						<key>matchstring</key>
						<string></string>
						<key>outputlabel</key>
						<string>Open website</string>
						<key>uid</key>
						<string>EEAE4AD1-7B81-409C-821C-00A1CA6056C4</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>View in 1Password</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>910FCF14-BDBB-4FF7-A7B2-41014E499149</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>type</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.transform</string>
			<key>uid</key>
			<string>AADC9859-4CF2-43B3-831D-940B6BCBC278</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>0</integer>
				<key>script</key>
				<string># THESE VARIABLES MUST BE SET. SEE THE ONEUPDATER README FOR AN EXPLANATION OF EACH.
readonly remote_info_plist="https://raw.githubusercontent.com/alfredapp/1password-workflow/master/Workflow/info.plist"
readonly workflow_url="alfredapp/1password-workflow"
readonly download_type='github_release'
readonly frequency_check='4'

# FROM HERE ON, CODE SHOULD BE LEFT UNTOUCHED!
function abort {
  echo "${1}" &gt;&amp;2
  exit 1
}

function url_exists {
  curl --silent --location --output /dev/null --fail --range 0-0 "${1}"
}

function notification {
  local -r notificator="$(find . -type d -name 'Notificator.app')"
  if [[ -n "${notificator}" ]]; then
    "${notificator}/Contents/Resources/Scripts/notificator" --message "${1}" --title "${alfred_workflow_name}" --subtitle 'A new version is available'
    return
  fi

  local -r terminal_notifier="$(find . -type f -name 'terminal-notifier')"
  if [[ -n "${terminal_notifier}" ]]; then
    "${terminal_notifier}" -title "${alfred_workflow_name}" -subtitle 'A new version is available' -message "${1}"
    return
  fi

  osascript -e "display notification \"${1}\" with title \"${alfred_workflow_name}\" subtitle \"A new version is available\""
}

# Local sanity checks
readonly local_info_plist='info.plist'
readonly local_version="$(/usr/libexec/PlistBuddy -c 'print version' "${local_info_plist}")"

[[ -n "${local_version}" ]] || abort 'You need to set a workflow version in the configuration sheet.'
[[ "${download_type}" =~ ^(direct|page|github_release)$ ]] || abort "'download_type' (${download_type}) needs to be one of 'direct', 'page', or 'github_release'."
[[ "${frequency_check}" =~ ^[0-9]+$ ]] || abort "'frequency_check' (${frequency_check}) needs to be a number."

# Check for updates
if [[ $(find "${local_info_plist}" -mtime +"${frequency_check}"d) ]]; then
  if ! url_exists "${remote_info_plist}"; then abort "'remote_info_plist' (${remote_info_plist}) appears to not be reachable."; fi # Remote sanity check

  readonly tmp_file="$(mktemp)"
  curl --silent --location --output "${tmp_file}" "${remote_info_plist}"
  readonly remote_version="$(/usr/libexec/PlistBuddy -c 'print version' "${tmp_file}")"

  if [[ "${local_version}" == "${remote_version}" ]]; then
    touch "${local_info_plist}" # Reset timer by touching local file
    exit 0
  fi

  if [[ "${download_type}" == 'page' ]]; then
    notification 'Opening download page…'
    open "${workflow_url}"
    exit 0
  fi

  download_url="$([[ "${download_type}" == 'github_release' ]] &amp;&amp; curl --silent "https://api.github.com/repos/${workflow_url}/releases/latest" | grep 'browser_download_url' | head -1 | sed -E 's/.*browser_download_url": "(.*)"/\1/' || echo "${workflow_url}")"

  if url_exists "${download_url}"; then
    notification 'Downloading and installing…'
    curl --silent --location --output "${HOME}/Downloads/${alfred_workflow_name}.alfredworkflow" "${download_url}"
    open "${HOME}/Downloads/${alfred_workflow_name}.alfredworkflow"
  else
    abort "'workflow_url' (${download_url}) appears to not be reachable."
  fi
fi</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>AE76F4A7-146D-417D-9F3D-F6A410C9C970</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>browser</key>
				<string></string>
				<key>spaces</key>
				<string></string>
				<key>url</key>
				<string>onepassword://view-item/?a={var:accountID}&amp;v={var:vaultID}&amp;i={var:itemID}</string>
				<key>utf8</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.openurl</string>
			<key>uid</key>
			<string>7277B529-365D-4D92-B874-22C6E407F47E</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.junction</string>
			<key>uid</key>
			<string>1F48BB68-C11E-4C91-A9DA-E19098554E9A</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>Use `1p` to interact with your 1Password items.

On first run you’ll need to set up your account with 1Password’s official command-line tool. Your terminal will open and guide you through the process.

![](https://user-images.githubusercontent.com/1699443/164910915-1d7e8f0e-4509-4c65-ad51-01d0268d319a.png)

From then on, `1p` will show your items. ↵ opens the website in your browser (and fills the credentials if you have the browser extension installed) while ⌘↵ opens the item in 1Password.

![](https://user-images.githubusercontent.com/1699443/164912992-b06c1eca-3636-46e7-84d7-7efedc5c23a9.png)

The Workflow will attempt to detect when you update items in 1Password and present you with the option to refresh them. You can disable this behaviour by flipping the `auto_refresh` Workflow Environment Variable to `0`. Set `logins_only` to `1` if you want to hide other item types.

Uncommon but useful actions, such as toggling vaults, can be accessed via `:1pextras`.

![](https://user-images.githubusercontent.com/1699443/164913293-a1ff8693-eeb0-4c26-9915-37c294e481e3.png)

![](https://user-images.githubusercontent.com/1699443/164913297-063df227-107e-4026-a330-08269d7424c6.png)

The Workflow uses tools and methodologies appropriate for 1Password 8. For older versions, see Alfred Preferences → Features → 1Password.</string>
	<key>uidata</key>
	<dict>
		<key>09BA5A7C-9F72-441C-95B2-46F669C53682</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>305</integer>
		</dict>
		<key>10031FBB-CD36-4DDE-AA61-1642381CD7AF</key>
		<dict>
			<key>xpos</key>
			<integer>230</integer>
			<key>ypos</key>
			<integer>605</integer>
		</dict>
		<key>1F48BB68-C11E-4C91-A9DA-E19098554E9A</key>
		<dict>
			<key>xpos</key>
			<integer>230</integer>
			<key>ypos</key>
			<integer>925</integer>
		</dict>
		<key>2166D3DB-EF96-4C03-B95A-77D5068615D7</key>
		<dict>
			<key>note</key>
			<string>Open and fill in web browser</string>
			<key>xpos</key>
			<integer>935</integer>
			<key>ypos</key>
			<integer>730</integer>
		</dict>
		<key>36A773EE-B145-4579-B70F-6D286604C92B</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>175</integer>
		</dict>
		<key>3C6D1460-731F-4A4A-8836-8AD03743EE23</key>
		<dict>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>730</integer>
		</dict>
		<key>4AFED243-84FB-4005-B115-FFD8635E6737</key>
		<dict>
			<key>xpos</key>
			<integer>230</integer>
			<key>ypos</key>
			<integer>440</integer>
		</dict>
		<key>4FEB803E-78D2-4DAA-A493-0C499D3B3415</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>50</integer>
		</dict>
		<key>53ECE55D-3284-4E21-B72E-A4B7FC8FA170</key>
		<dict>
			<key>xpos</key>
			<integer>405</integer>
			<key>ypos</key>
			<integer>335</integer>
		</dict>
		<key>556ED3AD-7754-4CD8-8293-1D142475B475</key>
		<dict>
			<key>xpos</key>
			<integer>1130</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
		<key>5B779377-8A0B-4819-9840-611C663A1004</key>
		<dict>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>455</integer>
		</dict>
		<key>604864F3-BFC6-44E3-9B01-F23F5B25D77F</key>
		<dict>
			<key>xpos</key>
			<integer>405</integer>
			<key>ypos</key>
			<integer>205</integer>
		</dict>
		<key>608EC08C-E2FB-4A53-B92A-DEAA5E177DAD</key>
		<dict>
			<key>xpos</key>
			<integer>60</integer>
			<key>ypos</key>
			<integer>585</integer>
		</dict>
		<key>666D7BDE-787B-44BD-A535-3F76541B7F8C</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
		<key>7277B529-365D-4D92-B874-22C6E407F47E</key>
		<dict>
			<key>note</key>
			<string>View in 1Password</string>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>895</integer>
		</dict>
		<key>745206F1-E7CE-43E5-93E0-80BAC4DC608C</key>
		<dict>
			<key>xpos</key>
			<integer>405</integer>
			<key>ypos</key>
			<integer>465</integer>
		</dict>
		<key>82BDBABC-EF45-49EC-9E6D-AAA169CC3C7A</key>
		<dict>
			<key>xpos</key>
			<integer>935</integer>
			<key>ypos</key>
			<integer>585</integer>
		</dict>
		<key>900A2A3E-D5CB-475C-996A-C6A8207DB171</key>
		<dict>
			<key>xpos</key>
			<integer>60</integer>
			<key>ypos</key>
			<integer>50</integer>
		</dict>
		<key>910FCF14-BDBB-4FF7-A7B2-41014E499149</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>750</integer>
		</dict>
		<key>985CB791-EA4E-4B3E-A04E-37A481C33035</key>
		<dict>
			<key>xpos</key>
			<integer>60</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
		<key>9FB513DD-70CB-4714-90C0-60C64D8A8784</key>
		<dict>
			<key>xpos</key>
			<integer>490</integer>
			<key>ypos</key>
			<integer>585</integer>
		</dict>
		<key>A37B93D7-6352-42BE-B1CD-FE57CFD9C54B</key>
		<dict>
			<key>xpos</key>
			<integer>670</integer>
			<key>ypos</key>
			<integer>305</integer>
		</dict>
		<key>AADC9859-4CF2-43B3-831D-940B6BCBC278</key>
		<dict>
			<key>xpos</key>
			<integer>865</integer>
			<key>ypos</key>
			<integer>760</integer>
		</dict>
		<key>ACCDC3AA-BCFF-4406-B851-9DF07B65D2DD</key>
		<dict>
			<key>note</key>
			<string>launchd agent</string>
			<key>xpos</key>
			<integer>1130</integer>
			<key>ypos</key>
			<integer>50</integer>
		</dict>
		<key>AE76F4A7-146D-417D-9F3D-F6A410C9C970</key>
		<dict>
			<key>colorindex</key>
			<integer>12</integer>
			<key>note</key>
			<string>OneUpdater</string>
			<key>xpos</key>
			<integer>1130</integer>
			<key>ypos</key>
			<integer>895</integer>
		</dict>
		<key>E0E63366-C846-4EB6-8625-9CCDD1637737</key>
		<dict>
			<key>xpos</key>
			<integer>865</integer>
			<key>ypos</key>
			<integer>435</integer>
		</dict>
	</dict>
	<key>variables</key>
	<dict>
		<key>auto_refresh</key>
		<string>1</string>
		<key>logins_only</key>
		<string>0</string>
	</dict>
	<key>version</key>
	<string>0.9.0</string>
	<key>webaddress</key>
	<string>https://github.com/alfredapp/1password-workflow/</string>
</dict>
</plist>
